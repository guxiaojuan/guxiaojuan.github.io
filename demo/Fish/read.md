                                                canvas小游戏之爱心鱼总结

    这个小游戏练习是根据慕课网教程写的，里边的老师讲的很详细，而且将图片素材都有提供，感谢老师。自己在这里做个总结~
    
    这款游戏主要是涉及到对HTML5的canvas中的一些API的学习，同时还涉及到了轮播序列帧，碰撞检测，贝塞尔曲线以及游戏中的
    一些基本操作，如一个值向另一个值的趋近等
    
    过程：
    1.首先就是搭建主页面。把画布分为两层，其中上层的canvas1绘制大小鱼，漂浮物以及基本的UI，下层即里层的canvas1绘制背景，
    海葵和海葵产生的果实

    2.由于是游戏，就要让其中的海葵啊，大鱼小鱼之类的像动画一样动起来。怎么能够让动起来，此时就需要定义一个变量来将当前
    状态与下一个状态联系起来，即控制两个动画帧之间的时间间隔。代码中我们用了deltaTime来表示两帧之间的间隔。同时不能让
    deltaTime这个值无限变大。

     var now=Date.now();
     deltaTime=now-lastTime;
     if(deltaTime>50)
         deltaTime=50;
     lastTime=now;

    3.海葵的绘制
      
      首先需要用drawImage()函数来引入背景图片.接下来就要准备画海葵了，对于海葵，我们得定义它的位置坐标，由于海葵是在不断
      运动的，所以我们要定义它的头部坐标和根部坐标，即headx,heady,rootx,rooty.但是由于根部并不需要运动，所以rooty其实并
      不需要，所以我们不用定义，由于不止一个海葵，所以这些参数都应该定义为数组。同时海葵是需要左右摇摆的，所以在绘制海葵
      时我们就需要用到贝塞尔二次曲线的概念了，画该二次曲线用到的API函数时quadraticCurveTo(),该函数接受4个参数，起始点的坐
      标，控制点的坐标。其中起始点的坐标就是海葵的根部坐标了，由于根部我们并没有定义y坐标，但是我们可以给它一个固定值，代
      码中用了canHeight-100,其中canHeight是画布的高度；控制点则就是海葵的头部坐标了。可是海葵的头部坐标怎么计算呢。头部的
      纵坐标可以用随机函数得到，横坐标用到了正弦函数。这里的数据处理老师真是用的非常好，用deltaTime得到一个角度，然后得到
      它的正弦值L。由于各个海葵的摆动幅度不同，所以我们需要用一个数组amp来控制各个海葵摆动的振幅。amp数组用也用random函数
      来得到。
          this.alpha+=deltaTime*0.0009;   //角度
          var L=Math.sin(this.alpha);    //正弦值
          this.amp[i]=Math.random()*50+50;  //摆动的幅度
          
      头部坐标
          this.head[x]=this.root[x]+L*this.amp[i];

      二次曲线绘制
          quadraticCurveTo(this.rootx[i],canHeight-100,this.headx[i],this.heady[i]);


    4.绘制果实
    
      首先，果实是由海葵产生的，所以果实的产生位置与海葵的头部坐标有关。同时，海葵有两种，橙色和蓝色，可以使用随机数来确定
      产生什么颜色。果实在产生过程中，会慢慢长大，但是不能一直长大，此时就需要设置一个临界值来限制果实的大小。果实也不是一直
      存在，等它漂浮出页面之后，我们就可以认为它已经死了，所以要为果实设置一个alive属性来保证果实是否活着。大鱼只能吃活着的
      果实。

      在构造函数中，需要设置果实的位置坐标，果实的alive状态，果实的半径（需要长大），果实的上升速度，果实的类型（橙色和蓝色）。
      需要保证在画面中的果实不能太多，也不能太少，所以fruitMonitor函数就是用来监视每个时刻留在画面中的果实，如果果实太少，就
      使用sendFruit函数，该函数内部调用了果实生成函数born。
      在画果实时，主要还是对果实长大过程的控制。这里，我们用this.l[i]+=this.spd[i]*deltaTime来决定果实的半径。spd数组保存每
      个果实长大的速度，随机函数得到。代码中限制了如果果实半径大于15则开始让果实往上飘，即改变y坐标 this.y[i]-=this.spd[i]*
      deltaTime;(强调，canvas画布是从上往下为正方向~）


    5.绘制大鱼和小鱼
      
      鱼分为head,body,tail三部分，因为画布上的覆盖问题，所以我们需要先画尾巴，接着身体，最后眼睛。大鱼和小鱼的绘制是相似的，
      搞懂其中一个，另一个直接模仿即可。
     
      需要搞清楚，大鱼是随着鼠标移动，而小鱼是随着大鱼移动。同时，需要做大鱼和小鱼的动画，即眨眼睛啊，摇尾巴这种，吃到食物
      身体需要变色。其实这个大鱼小鱼的动画是很简单的，就是几张图片的轮播，我们需要时间间隔，比如在设置眼睛时，眨眼睛和闭眼
      睛的间隔是不一样的。在设置这些值时，还是要用到一个很重要的变量deltaTime
      




































